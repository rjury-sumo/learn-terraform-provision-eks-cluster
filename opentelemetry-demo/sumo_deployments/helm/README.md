# Sumo Logic OpenTelemetry Demo Helm Chart Deployment

`sumo-opentelemetry-demo` custom helm chart has been developed to present
capabilities of Sumo Logic Kubernetes Collection solution with OpenTelemetry-Demo
application.

## Minimum Requirements

| Name | Version |
|------|---------|
| K8s  | 1.21+   |
| Helm | 3.5+    |

You will need a pair of the
[Sumo Logic Access Id and Key](https://help.sumologic.com/docs/manage/security/access-keys/).

## Deployment

1. Go to [sumo-opentelemetry-demo](./sumo-opentelemetry-demo/) directory

1. Update helm chart dependencies

```bash
helm dependency update
```

1. Helm chart installation

### OpenTelemetry Demo with Sumo Logic Real User Monitoring

Example below sets release name as `sumo-demo` and everything will
be deployed in the `sumo-demo` namespace. In this step
[Sumo Logic Access Id and Key](https://help.sumologic.com/docs/manage/security/access-keys/)
and [Sumo Logic Real User Monitoring URL](https://help.sumologic.com/docs/apm/real-user-monitoring/#step-1-create-a-rum-http-traces-source)
are needed.

```bash
 helm install sumo-demo . \
 --namespace sumo-demo \
 --create-namespace \
 --set sumologic.sumologic.accessId=YOUR_SUMO_LOGIC_ACCESS_ID \
 --set sumologic.sumologic.accessKey=YOUR_SUMO_LOGIC_ACCESS_KEY \
 --set sumologic.sumologic.clusterName=YOUR_CLUSTER_NAME \
 --set sumologic.rumUrl=YOUR_SUMO_LOGIC_RUM_URL
```

After successful installation please see the output notes and follow the steps
to get access to the OpenTelemetry-Demo Frontend.

### OpenTelemetry Demo without Sumo Logic Real User Monitoring

Example below sets release name as `sumo-demo` and everything will
be deployed in the `sumo-demo` namespace. In this step
[Sumo Logic Access Id and Key](https://help.sumologic.com/docs/manage/security/access-keys/)
are needed.

```bash
 helm install sumo-demo . \
 --namespace sumo-demo \
 --create-namespace \
 --set sumologic.sumologic.accessId=YOUR_SUMO_LOGIC_ACCESS_ID \
 --set sumologic.sumologic.accessKey=YOUR_SUMO_LOGIC_ACCESS_KEY \
 --set sumologic.sumologic.clusterName=YOUR_CLUSTER_NAME \
 --set opentelemetry-demo.components.frontend.enabled=true
```

After successful installation please see the output notes and follow the steps
to get access to the OpenTelemetry-Demo Frontend.
To export telemetry data generated by Frontend it's required to forward port to
the collector from localhost.

Please run:

```bash
kubectl --namespace sumo-demo port-forward service/sumo-demo-sumologic-otelagent 4318:4318
```

## Application access

You can access the OpenTelemetry-Demo Frontend forwarding the port 8080 to your localhost.

Please execute:

```bash
kubectl --namespace sumo-demo port-forward service/sumo-demo-frontend 8080:8080
```

Navigate to <http://localhost:8080> and make some orders :)

## Chart uninstallation

Execute:

```bash
helm delete --namespace sumo-demo sumo-demo
```
